# SElinux
## SElinux简介
1. SElinux的由来：SElinux称为安全增强型Linux。由美国安全局(NSA)开发的。NSA最初设计的安全模型叫FLASK。后来NSA觉得linux更具发展。就在linux上重新实现了FLASK，称之为SElinux。linux内核从2.6版本进行了集成。
## 为什么需要SElinux
1. 在系统中安全机制分为应用程序和内核。
2. 现实中用户可能不小心对文件进行权限划分错误，引发安全问题。所以在此基础上，使用mac机制的selinux来根据事先编写的安全策略决定发起者是否有对应的权限。更好的保证安全。
3. 资源的访问和操作由主体为用户的权限管理机制来控制。也被称为自主访问控制DAC。
4. 强制访问控制MAC的控制原理：主体是进程。
   1. 操作者是否具有该资源的访问和操作权限(DAC)
   2. 当前进程是否拥有这一列资源的访问权限。
   3. SElinux就是mac机制的一种实现。所以selinux称之为安全增强型。
5. SElinux常用概念
   1. 主体：进程
   2. 对象：被主体访问的资源，可以是文件，目录，端口，设备等。
   3. 政策：选择性的对某些进程进行管理。政策分三种
      1. targeted：对大部分网络服务进行管制
      2. minimun：从targeted中的大部分网络服务中选择一部分进行管制
      3. mls：多级安全保护，对所有进程进行管制，最严格的正常。
      4. 政策可以在/etc/selinux/config中设定。
   4. 规则：一套政策由多条规则。规则是模块化、可扩展的。
   5. 安全上下文：是访问控制中的一个简单的，一致的访问控制属性。相当于附加在对象上的标签(label)这个标签是一个字符串，由四部分组成
      1. 身份字段(user)
      2. 角色(role)表示此数据是进程还是文件或目录。
      3. 类型(type)
      4. 安全级别
   6. 安全策略：安全策略实在安全上下文基础上来描述的，安全上下文中重点是类型Type，因此SELinux又叫基于TE的安全机制。
## SElinux架构
1. 内核空间的SELinux LSM模块负责内核资源的安全访问控制
2. 用户空间的Security Context描述的是资源安全上下文。
3. 用户空间的SEAndroid Policy描述的是资源安全访问策略。
4. 用户空间的Security Server 一方面需要到用户空间的Security Context去检索对象的安全上下文。另一方面也需要到内核空间去操作对象的安全上下文。
5. 用户空间的libselinux库封装了对SELinux文件系统接口的读写操作。
## SElinux 常见问题
1. selinux模式
   1. Enforcing：强制模式。SELinux被启动，并强制执行所有的安全策略规则。
   2. Disabled：关闭模式。在Disable模式中，SELinux被关闭。
   3. Permissive：宽容模式。SELinux被启用。但安全策略规则并没有被强制执行。