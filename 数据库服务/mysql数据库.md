## MYsql数据库由来
1. 数据库下面有一个数据表的存储单元，数据表里面才存储数据。
2. mysql>数据库>数据表>数据
3. MYsql是一个关系型数据库，由瑞典Mysql AB公司开发。2006年被SUN公司收购，2008年 SUN公司又被甲骨文oracle公司收购。属于Oracle旗下产品。
4. mysql默认端口号：3306
## MYsql数据库特点
1. 关系型数据库将数据保存在不同的表中，不是放在一个大的仓库内，增加了速度并提高了灵活性。
2. MYsql是数据库的集合。使用SQL语言访问数据库。采用双授权政策，分为社区版和商业版。而这两个版本又分别分四个版本发布：
   1. Alpha版：开发公司内部运行，不对外公开
   2. Beta版：开发自己测试后邀请或提供用户体验与测试版
   3. RC版：生产环境发布前进行测试后的bug信息收集后，进行修复和完善的一版。
   4. GA版：软件产品正式发布的版本。也称生产版本的产品。
3. mysql产品路线
   1. 5.0.xx-5.1.xx。5.0只针对漏洞修复重新发布。5.1针对严重漏洞修复和安全修复重新发布。
   2. 5.4xx-5.7xx：为了更好的整合Mysql AB和第三方开发的新存储引擎。更好的支持SMP架构，提高性能而做了大量的代码重构。主流互联网公司一般用Mysql5.5
   3. 6.0xx-7.1xx：为了提交Mysql Cluster性能和稳定性，使其对Cluster存储引擎提供更有效的支持和优化。
   4. 官方地址数据库版本下载地址：https://dev.mysql.com/downloads/mysql/
   5. 国内镜像站支持下载地址：http://mirrors.sohu.com/mysql/
4. mysql体积小、速度快、总体拥有成本低、开放源码。
5. mysql使用C和C++编写。支持多种操作系统。为多种编程语言提供了API。支持多线程，充分利用CPU资源。优化的SQL查询算法，有效地提高查询速度。提供多语言支持。提供TCP/IP、ODBC、和JDBC等多种数据库连接途径。等等。
### 存储引擎
1. MYsql5.0之前使用MyISAM之前的默认数据库引擎。拥有较高的插入、查询速度。不支持事务管理
2. InnoDB事务型数据库，支持ACID事务。支持行级锁定。Mysql 5.5起成为默认数据库引擎。
3. 其它引擎还有BDB、Memory、Merge、Archive、Federated、Cluster/NDB、CSV、BlackHole、example。
### mysql数据库命名规则
1.Mysql数据库软件名字由3个数字和一个后缀组成的版本号。
如：mysql-5.0.56.tar.gz 第一个5是主版本号，第二个0是发行级别，第三个56是此系列的版本号。后缀显示发行的稳定级别。
RDBMS术语：
数据库、数据表、列、行、冗余、主键、外键、复合键、索引、参照完整性。
表格包含： 表头(header)，列(col)，行(row)，值(value)，键(key)。
mysql采用了GPL协议。可以自己修改源码来开发自己的Mysql系统。
## mysql安装方式
1. yum/rpm包安装 yum install -y + mysql包/rpm -ivh +mysql包（前者自动解决依赖，需要联网。后者手动解决依赖，可不联网。但须先把包下载至本地）
2. ./configure make&&make install 源码安装。需手动解决依赖，需自己指定安装路径，配置文件地址等参数。
3. yum安装后mysql默认配置文件地址
/etc/rc.d/init.d/                               #启动脚本文件mysql的目录
/etc/my.cnf                                     #mysql配置文件
/etc/logrotate.d/mysql                          #mysql日志轮转切割目录
/etc/selinux/targeted/active/modules/100/mysql  
/etc/selinux/targeted/tmp/modules/100/mysql
/root/shell/mysql
/var/lib/mysql                                  #数据库目录
/var/lib/mysql/mysql
/usr/bin/mysql                                  #mysqladmin等命令
/usr/lib64/mysql
/usr/share/mysql                                #命令及配置文件目录
/var/log/mysqld.log                             #错误输出日志目录
/var/run/mysqld/mysqld.pid                      #pid进程目录
4. mysql的默认进程：可使用ps -ef |grep mysql来查看。
## mysql主从复制的三种方式
    mysql也可以实现主主复制功能。
1. 同步复制：当主库提交事务后，binlog通过dump线程传到从库的中继日志。从库重放完成后，回复一个ACK给主库，主库才结束等待，执行后续操作。若从库节点过多，主库等待时间越久，需要设置一个超时等待时间。
2. 异步复制：主库不需要等待从库提交确认，直接执行后续操作，返回客户端。优点，不需要等待，缺点，主机提交挂机后，binlog还没同步到从库时，强制切换主从会造成新的主库数据不完整。
3. 半同步复制：介于同步和异步复制的折中。主库发送binlog给从库后，需等待从库确认后执行。但不需要等从库提交完事务后才发确认通知给主库，而是当从库将binlog写到relaylog后，就会给主库发送确认通知，缩短了主库等待时间也维护了数据安全性。
4. 增强半同步复制：只有当收到至少一个从库返回的relay log写入确认后，才提交事务。提交事务在收到确认之后。
## Mysql高可用负载均衡
1. 使用mysql时随着时间增长，用户量以及数量增加。访问量剧增。会使mysql性能降低。这时候就需要提高mysql的并发量来解决，常用方法有：
   1. 分布式(存储)数据库：在逻辑上是一个统一的整体，在物理上则是分别存储在多台不同的物理节点上。提高访问的执行效率。当前只对Innodb存储引擎支持。
   2. mysql读写分离：备库用于处理读操作，主库同时处理读写或只写。mysql提供的几种常见的读写分离方式：基于查询的读写分离、基于脏数据、基于会话等的读写分离。mysql的读写分离。减少了主库的
   3. 高可用负载均衡：LVS+keepalived组合实现。haproxy+keepalived组合实现
   4. 增加缓存服务器：中间redis缓存服务器+后端mysql数据库。引入mysql——proxy中间件。
   5. 修改DNS：通过N个服务器IP指定到一个域名，根据请求的不同标识特征，将请求发送给不同的IP服务器处理。
2. 高可用负载均衡，在服务器前端设置一个负载均衡器。mysql的负载均衡，通常使用数据分片(把数据分割成小块，存储到不同的db节点中)、复制等操作。
3. 负载均衡除了均发数据库请求，还可以提供管理读/写策略。在分发请求时确定哪些节点可写，可读。随即将请求发送到指定节点上执行操作。
## 常用的mysql优化
1. 选择合适的存储引擎：MyISAM 仅仅缓存索引，而 InnoDB 缓存数据和索引，MyISAM 不支持事务。可是 假设你使用 innodb_flush_log_at_trx_commit = 2 能够获得接近的读取性能 (相差百倍) 
2. 选取最适用的字段属性：(尽量把字段设置为NOTNULL类型)
3. 使用链接(JOIN)来代替子查询(Sub-Queries)：MySQL不需要在内存中创建临时表来完成这个逻辑上的需要两个步骤的查询工作。
4. 使用联合(UNION)来代替手动创建的临时表：可以把需要使用临时表的两条或更多的select查询合并的一个查询中。在客户端的查询会话结束的时候，临时表会被自动删除，从而保证数据库整齐、高效
5. 使用事务：要么语句块中的每条语句都操作成功，要么都失败。保持数据库中数据的一致性和完整性。
6. 锁定表：使用select语句取出初始数据，通过计算，用update语句将新值更新到表中。保证在unlocktables命令被执行之前，不会有其它的访问来对inventory进行插入、更新或者删除的操作。
7. 使用外键：外键可以把customerinfo表中的CustomerID映射到salesinfo表中CustomerID，任何一条没有合法CustomerID的记录都不会被更新或插入到salesinfo中
8. 使用索引：索引可以令数据库服务器以比没有索引快得多的速度检索特定的行。
9. 优化的查询语句：
   1.  首先，最好是在相同类型的字段间进行比较的操作
   2.  其次，在建有索引的字段上尽量不要使用函数进行操作
   3.  在搜索字符型字段时，我们有时会使用LIKE关键字和通配符。



