## ARP技术
1. ARP(地址解析协议)通过广播找MAC。在仅知道主机IP地址来确定物理MAC地址的一种协议。
### ARP代理
1. ARP不能跨网段通信，所以如果目标主机和发送主机不在一个网段。需要一个路由或ARP中继。发送主机找到路由或中继。然后通过中继转给目的地址。
### ARP欺骗
1. 通过伪造IP地址和MAC地址实现ARP欺骗。
2. 防御手段
   1. 进行mac和IP地址绑定
   2. 杀毒软件开启arp防火墙
## LVS
### LVS是什么
1. LVS全称：linux virtual server。意linux虚拟服务器。是一个虚拟服务器集群系统
### LVS优点
1. 使用集群技术和linux操作系统实现一个高性能、高可用的服务器。
2. 很好的可伸缩性、可靠性、可管理性。
### LVS技术实现
1. LVS集群采用IP负载均衡技术和基于内容请求分发技术。将请求均衡的转移到不同的服务器上执行。
### IP负载的原理和实现
1. IP负载原理：使用IPVS模块，安装在控制器服务器上，在控制器服务器虚拟一个对外访问的IP(VIP).用户访问VIP。到达控制器服务器，控制器服务器根据一定规则选择一个真实服务器。处理完数据后返回给客户端数据。
2. 实现IP负载的三种方法： 
3. 前景提要：都要求控制器服务器和真实服务器都有一块网卡连在同一个物理网段上。
   1. VS/NAT：网络地址翻转技术实现虚拟服务器。用户请求和返回都要经过控制器服务器。
   2. VS/TUN: IP隧道技术实现虚拟服务器。用户请求经过控制器服务器，但服务器数据返回直接给客户端。
   3. VS/DR:  直接路由技术实现虚拟服务器。 通过改写请求报文的mac地址。将请求发送到real server。
   4. 性能比较：DR>TUN>NAT>FULL NAT
4. 实现LVS的负载均衡调度算法
5. 静态调度：1，2，7，8
6. 动态调度：3，4，5，6，9，10
   1. 轮询调度(Round Robin简称RR)：按依次循环的方法将请求调度到不同的服务器上。
   2. 加权轮询调度(Weight Round Robin简称WRR)：对轮询算法的一种优化与补充。给每台服务器添加一个权值。权值越高服务器，处理请求越多。
   3. 最小连接调度(Least Connections简称LC)：把新的连接请求分配到当前连接数最小的服务器。一种动态的调度算法。通过服务器当前活跃的连接数来估计服务器的情况。
   4. 加权最小连接调度(简称WLC)：调度新连接时尽可能使服务器的已建立连接数和其权值成比例。动态调整其权值。
   5. 基于局部的最少连接(LBLC)：针对请求报文的目标IP地址的负载均衡调度。主要用于cache集群。将相同目标IP地址的请求调度到同一台服务器。来提高各服务器的访问局部性和cache命中率。
   6. 带复制的基于局部性的最少连接(LBLCR):与LBLC不同在于它要维护一个目标IP地址到一组服务器的映射，LBLC维护一个到一台服务器的映射。
   7. 目标地址散列调度(DH)现根据请求的目的IP地址，作为散列键，从静态分配的散列表找出对应的服务器。若服务器不可以或超载，返回空。
   8. 源地址散列调度U(SH):根据请求的源IP地址，作为散列键，从静态分配的散列表找出对应的服务器。若不可用或超载返回空。
   9.  最短的期望的延迟(SED)：基于WLC算法。例如有三台服务器权重分别为1，2，3
   10. A:(1+1)/1=2 B:(1+2)/2=3/2 C(1+3)/3=4/3 把请求交给得出运算结果最小的服务器。
   11. 最少队列调度(NQ):无需队列，如果有realserver的连接数等于0就直接分配过去。不需要SED运算。
7. 集群采用三层结构
   1. 负载调度器(load balancer)：集群对外的前端机(唯一入口点)。负责将客户请求发送到一组服务器执行。
   2. 服务器池(server array)： 一组真正执行客户请求的服务器。执行web、mail、ftp、dns等。
   3. 共享存储(shared storage)：为服务器池提供一个共享的存储区。
8. LVS默认配置文件目录：
